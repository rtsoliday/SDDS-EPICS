% sddsimagemonitor: log EPICS image PVs to SDDS files.
%
\begin{sddsprog}{sddsimagemonitor}
\item \textbf{description:}
\verb+sddsimagemonitor+ reads EPICS image process variables and writes the image
  data to an SDDS file at regular intervals. Image PVs may be supplied from an
  input file or directly on the command line. Optional scalar PVs can be logged as
  parameters, and data may be conditioned on other PV values. Two-dimensional
  images produce one page per acquisition, while multi-plane data result in one
  page per plane.
\item \textbf{examples:}
The following command logs a set of camera images once per minute.
\begin{verbatim}
sddsimagemonitor cam.mon cam.sdds -interval=1,minute -steps=10
\end{verbatim}
where the contents of the file \verb+cam.mon+ are
\begin{verbatim}
SDDS1
&column name=WaveformPV, type=string &end
&data mode=ascii no_row_counts=1 &end
AR:SLM1:image1
\end{verbatim}
\item \textbf{synopsis:}
\begin{verbatim}
usage: sddsimagemonitor [<inputfile> | -PVnames=<name>[,<name>]] <outputfile>
    [{-erase | -generations[=digits=<integer>][,delimiter=<string>]} [-pendIOtime=<seconds>]
    [-steps=<integer> | -time=<value>[,<units>]] [-interval=<value>[,<units>]]
    [-enforceTimeLimit] [-offsetTimeOfDay]
    [-verbose] [-singleShot{=noprompt|stdout}] [-precision={single|double}]
    [-dataType={short|long|float|double|character|string}]
    [-onCAerror={useZero|skipPage|exit}]
    [-scalars=<filename>] [-flushSteps=<integer>]
    [-conditions=<filename>,{allMustPass|oneMustPass}[,touchOutput][,retakeStep]]
    [-comment=<parameterName>,<text>] [-nowarnings]
    [-xParameter=dimension=<value>[,name=<name>][,minimum=<value>][,maximum=<value>][,interval=<value>]]
    [-yParameter=dimension=<value>[,name=<name>][,minimum=<value>][,maximum=<value>][,interval=<value>]]
[-singleColumn] [-logOnChange] [-device=<name>] [-retakeStep]
\end{verbatim}
\item \textbf{files:}
\begin{itemize}
  \item \textbf{input file:} optional SDDS file with string column \verb|WaveformPV| naming image PVs.
  \item \textbf{output file:} SDDS file containing the logged images and related parameters.
\end{itemize}

\item \textbf{switches:}
\begin{itemize}
  \item {\verb+-PVnames=<name>[,<name>]+} --- specifies image PV names to read.
  \item {\verb+-scalars=<filename>+} --- logs scalar PVs as parameters in the output file.
  \item {\tt -erase} --- overwrites the output file if it exists.
  \item {\verb+-generations[=digits=<integer>][,delimiter=<string>]+} --- writes to a unique generation file.
  \item {\verb+-pendIOtime=<seconds>+} --- sets the wait time for channel access searches.
  \item {\verb+-steps=<integer>+} --- number of image acquisitions to perform.
  \item {\verb+-time=<value>[,<units>]+} --- total acquisition time; seconds, minutes, hours, or days.
  \item {\verb+-interval=<value>[,<units>]+} --- desired time between acquisitions.
  \item {\tt -enforceTimeLimit} --- enforces the time limit given with \verb+-time+.
  \item {\tt -offsetTimeOfDay} --- adjusts the starting \verb+TimeOfDay+ value.
  \item {\tt -verbose} --- prints a message when data are taken.
  \item {\verb+-singleShot[=noprompt|stdout]+} --- single acquisition triggered by a key press.
  \item {\verb+-precision={single|double}+} --- sets data precision for image PVs.
  \item {\verb+-dataType={short|long|float|double|character|string}+} --- forces an SDDS data type.
  \item {\verb+-onCAerror={useZero|skipPage|exit}+} --- action to take on channel access errors.
  \item {\verb+-flushSteps=<integer>+} --- buffers this many steps before writing to the file.
  \item {\verb+-conditions=<filename>,{allMustPass|oneMustPass}[,touchOutput][,retakeStep]+} ---
        applies limits from a conditions file to gate data logging.
  \item {\verb+-comment=<parameterName>,<text>+} --- inserts a comment parameter with the given text.
  \item {\tt -nowarnings} --- suppresses warning messages.
  \item {\verb+-xParameter=dimension=<value>[,name=<name>][,minimum=<value>][,maximum=<value>][,interval=<value>]+} ---
        defines X-axis parameter information.
  \item {\verb+-yParameter=dimension=<value>[,name=<name>][,minimum=<value>][,maximum=<value>][,interval=<value>]+} ---
        defines Y-axis parameter information.
  \item {\tt -singleColumn} --- writes image data to a single column with index parameters.
  \item {\tt -logOnChange} --- writes data only if scalar PVs change.
  \item {\verb+-device=<name>+} --- selects the device type (e.g., areadector or FLID).
  \item {\tt -retakeStep} --- repeats a step if timestamps or scalar values do not change.
\end{itemize}
\item \textbf{see also:}
\begin{itemize}
  \item \progref{sddsmonitor}
  \item \progref{sddsvmonitor}
  \item \progref{sddswmonitor}
\end{itemize}
\item \textbf{author:} M. Borland, L. Emery, H. Shang, R. Soliday, ANL
\end{sddsprog}
