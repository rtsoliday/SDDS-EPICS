%
% Template for making SDDS Toolkit manual entries.
%
\begin{latexonly}
\newpage
\end{latexonly}

\subsection{sddspvacontrollaw}
\label{sddspvacontrollaw}

\begin{itemize}
\item {\bf description:}
\verb+sddspvacontrollaw+ performs feedback on process variables using PV Access. The
input file defines an inverse response matrix: each column names a readback PV and a
string column lists the actuator PVs. The program adjusts actuators to regulate the
readbacks to zero or to given offsets, optionally logging data and applying limits.

\item {\bf example:}
\begin{flushleft}{\tt sddspvacontrollaw sddspvacontrollaw.inv -searchPath=/home/controls -interval=1 -steps=10 -gain=0.75 -runControlPV=string=shang:ControlLawRC -verbose}\end{flushleft}

\item {\bf synopsis:}
\begin{flushleft}{\tt sddspvacontrollaw <inputfile> [-searchPath=<dir-path>] [-actuatorColumn=<string>] [<outputfile>] [-gain={<real-value>|PVname=<name>}] [-interval={<real-value>|PVname=<name>}] [-steps=<integer>] [-updateInterval=<integer>] [-average={<number>|PVname=<name>}[,interval=<seconds>]] [-testValues=<file>] [-despike[=neighbors=<integer>][,passes=<integer>][,threshold=<value>]] [-deltaLimit={value=<value>|file=<filename>}] [-readbackLimit={value=<value>|minValue=<value>,maxValue=<value>|file=<filename>}] [-actionLimit={value=<value>|file=<filename>}] [-runControlPV={string=<string>|parameter=<string>}[,pingTimeout=<value>]] [-runControlDescription={string=<string>|parameter=<string>}] [-controlLogFile=<file>] [-glitchLogFile=file=<string>[,readbackRmsThreshold=<value>][,controlRmsThreshold=<value>]] [-CASecurityTest] [-waveforms=<filename>,<type>] [-verbose] [-dryRun]}\end{flushleft}

\item {\bf files:}
  \begin{itemize}
  \item {\bf input file:} \par
    An SDDS file containing the inverse response matrix. A string column lists actuator PV names and one column for each readback PV provides the matrix elements.
  \item {\bf output file:} \par
    If given, records readback and actuator values at each correction step.
  \end{itemize}

\item {\bf switches:}
  \begin{itemize}
  \item {\tt -searchPath} --- directory path used to locate input files.
  \item {\tt -gain} --- scalar or PV specifying overall feedback gain.
  \item {\tt -interval} --- time between corrections.
  \item {\tt -steps} --- number of correction iterations.
  \item {\tt -average} --- number of readback acquisitions to average, optionally with a time interval.
  \item {\tt -testValues} --- SDDS file giving limits that suspend feedback when readbacks are out of range.
  \item {\tt -deltaLimit} --- maximum change permitted for any actuator.
  \item {\tt -readbackLimit} --- maximum allowed readback error for each PV.
  \item {\tt -actionLimit} --- minimum absolute readback before applying corrections.
  \item {\tt -despike} --- despike readback data using neighbors and threshold tests.
  \item {\tt -runControlPV} --- run control PV name or parameter.
  \item {\tt -runControlDescription} --- run control description parameter.
  \item {\tt -waveforms} --- specify waveform PVs to read or write in addition to scalars.
  \item {\tt -verbose} --- print extra information.
  \item {\tt -dryRun} --- compute corrections without writing to actuators.
  \end{itemize}

\item {\bf see also:}
  \begin{itemize}
  \item \progref{sddscontrollaw}
  \end{itemize}

\item {\bf author: L. Emery, H. Shang, R. Soliday, ANL}
\end{itemize}
