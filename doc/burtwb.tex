%
% Template for making SDDS Toolkit manual entries.
%
\begin{latexonly}
\newpage
\end{latexonly}

%
% Substitute the program name for burtwb
%
\subsection{burtwb}
\label{burtwb}

\begin{itemize}
\item {\bf description:}
%
% Insert text of description (typically a paragraph) here.
%
\verb+burtwb+ reads values from a snapshot file, then
write them to process variables. This is the restore
counterpart of the backup program \verb+burtrb+.
\item {\bf example:} 
%
% Insert text of examples in this section.  Examples should be simple and
% should be proceeded by a brief description.  Wrap the commands for each
% example in the following construct:
% 
%
The state of the APS storage ring is restored by writing the 
content of the snapshot file SR.snp to the appropriate process variables:
\begin{verbatim}
burtwb -f SR.snp
\end{verbatim}
where the contents of the file \verb+SR.snp+ are
\begin{verbatim}
SDDS1
&description &end
&parameter
 name = SnapType,  type = string, &end
&column
 name = ControlType,  type = string, &end
&column
 name = ControlName,  type = string, &end
&column
 name = Lineage,  type = string, &end
&column
 name = Count,  type = long, &end
&column
 name = ValueString,  type = string, &end
&data
 mode = ascii, no_row_counts=1 &end
! page number 1
Absolute
pv S1A:Q1:CurrentAO - 1 300.0 
pv S1A:Q2:CurrentAO - 1 400.0 
\end{verbatim}
\item {\bf synopsis:} 
%
% Insert usage message here:
%
\begin{verbatim}
 usage: burtwb -f snap1 {snap2 ...} {-l logfile} {-o outfile}
                {-c ... comments ...} {-k keyword1 ... keywordn}
                {-d} {-v} {-p dep1 ... depn} {-r retry count} {-add} {-replace}
                {-sdds or -nosdds}
 
where
 
        -f snap1 {snap2 ...} - Snapshot filenames.  This is the only
                switch that is not optional.  You must specify at least one
                snapshot file.
 
        -l logfile - Log filename. The name of the file where all logging
                messages (e.g. error messages, reports of process variables
                that were not found) go.  The default is stderr.
 
        -o outfile - Snapshot filename.  If any of the snapshot files
                read only notify values, this file is created and those values
                are placed there.  If none of the snapshot files have read only
                notify values, then no file is created.  The default is stdout.
 
        -c ... comments ... - Comments.  Adds comments to the header of
                the snapshot file.
 
        -k keyword1 ... keywordn - Keywords.  Adds keywords to the header
                of the snapshot file.
 
        -d - Debug.  Save the files created by processing the dependency
                files with the C preprocessor.  The default is to delete these
                files.
 
        -v - Verbose.  This increases the amount of information displayed
                in the logfile.
 
        -p dep1 ... depn - Dependency filenames.  The names of the
                dependency files containing predicates to be evaluated before
                writing the values from the snapshot files.
 
        -r retry count - Number of additional attempts to wait for
                connections.  The program will attempt to find all the process
                variables.  If it is unsuccessful, it will try this many more
                times to establish connections.  The default value is 0.
 
        -add - Absolute snapshots written as adds.  All the absolute
                snapshots, i.e., those taken directly off IOCs, will be written
                as additions to the values found on the IOCs.  The default is
                to write the absolute snapshots as replacement values on the 
                IOCs.
 
        -replace - Relative snapshots written as replacements.  All the
                relative snapshots, i.e., those generated by adding or
                subtracting two snapshots, will be written to prelace the
                values on the IOCs.  The default is to write the relative
                snapshots as additions to the values on the IOCs.
 
        -sdds or -nosdds - SDDS/non-SDDS snapshot file.  Explicitly
                specifying that the generated snapshot file will be 
                SDDS/non-SDDS compliant.  The default is to adopt the SDDS
                type from the input(s).  If there is a heterogeneous set of
                inputs (some SDDS and some non-SDDS), the default is to produce
                and SDDS compliant snapshot file.
\end{verbatim}
\item {\bf files:}
% Describe the files that are used and produced
\begin{itemize}
\item {\bf input file:} \par
The input file is an SDDS file with at least three columns:
\begin{itemize}
        \item {\tt ControlName} --- Required string column for the process variable or device name.
        \item {\tt ControlType} --- Required string column for the control name type. For a 
                process variable name use ``pv''; for a device name use ``dev''.
        \item {\tt Lineage} --- Required string column for the lineage of a device name.
                The values aren't important for an input file. A value of \verb+-+ can be used (signifies
                a blank string to BURT programs).
        \item {\verb+Count+} --- Required long column. Needs to have a value of 1 for PVs and devices
                that are single-valued, which is the case here.
        \item {\tt ValueString} --- Required string column containing the value to be restored as a character string.
\end{itemize}
and one parameter:
\begin{itemize}
        \item {\verb+SnapType+} --- Required string parameter describing the snapshot type. Valid
                values are \verb+Absolute+ and \verb+Relative+.
\end{itemize}

The optional columns are:
\begin{itemize}
        \item {\tt RestoreMsg} --- String column for the device set message if the {\tt
                ControlType} value is ``dev''.  If this column is absent then the default
                restore message is ``set''.
\end{itemize}
\end{itemize}

%
\item {\bf switches:}
%
% Describe the switches that are available
%
    \begin{itemize}
%
%   \item {\tt -pipe[=input][,output]} --- The standard SDDS Toolkit pipe option.
%
        \item {\tt -f snap1 [snap1] ...} --- Snapshot files.
        \item {\tt -add} --- Adds the {\tt ValueString} values to the process variables.
    \end{itemize}

\item {\bf see also:}
    \begin{itemize}
%
% Insert references to other programs by duplicating this line and 
% replacing <prog> with the program to be referenced:
%
    \item \progref{burtrb}
    \end{itemize}
%
% Insert your name and affiliation after the '}'
%
\item {\bf author: N. Karonis, ANL} 
\item {\bf manual page: L. Emery, ANL} 
\end{itemize}
